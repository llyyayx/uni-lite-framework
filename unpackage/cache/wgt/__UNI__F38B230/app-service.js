if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const a=this.constructor;return this.then((t=>a.resolve(e()).then((()=>t))),(t=>a.resolve(e()).then((()=>{throw t}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";const a=(e,a)=>{uni.showModal({title:e,content:a,showCancel:!1})},t=e=>e.includes("image/png")||e.includes("image/jpeg")||e.includes("image/jpg")||e.includes("image/webp")||e.includes("image/gif")||e.includes("image/tiff")||e.includes("stream"),n=(e,a)=>e.find((e=>e.apiId===a)),r={appCode:"7732486935",serve:{madp:{name:"移动中台测试环境下的代理地址",host:"https://madp.sgai.cn",baseUrl:"/madp-app/msGw/apiDefine/callApiUnauth"},lwlims:{name:"limis后台服务地址",host:"http://10.168.114.160:31043",baseUrl:"/iiot-lwlims-app"}},serveKey:"madp",reqDrive:"gatewayRequest",injectKeys:["madp"],injectHost:!0,devToken:"",devUserInfo:"mock",devInjectHost:!1,appScanCode:!0,appReadNfc:!1,openUpdate:!1,successCode:["0","1"],gatewaySuccessCode:["1"],updateUrl:"https://madp.sgai.cn:30201"},s=e=>{const n=e.serveKey||r.serveKey;return new Promise(((s,o)=>{uni.request({url:r.serve[n].host+r.serve[n].baseUrl+e.url,header:{"content-type":"application/json",Authorization:uni.getStorageSync("userInfo").token,...e.header},responseType:e.responseType?e.responseType:"text",method:e.method||"GET",data:e.data||"",success:function(n){const i=n.header["content-type"]||"";t(i)?s(n.data):"999"===n.data.errorCode?(o(n.data),a("提示","身份认证过期")):e.gateway?r.gatewaySuccessCode.includes(n.data.status)&&r.successCode.includes(n.data.data.status)?s(n.data.data):(o(n.data.data),a("提示",n.data.data.msg||n.data.data.message||n.data.msg||n.data.message)):r.successCode.includes(n.data.status)?s(n.data):(o(n.data),a("提示",n.data.msg||n.data.message))},fail:function(e){o(e),a("提示","网络错误，请重试")}})}))},o={gatewayRequest:{pack(e){const{task:a,serveKey:t,data:n,header:s,oldFormat:o,responseType:i}=e;return{serveKey:t||r.serveKey,apiId:a.apiId,data:n,header:s,oldFormat:o,responseType:i}},run:e=>(e=>{const a=e.serveKey||r.serveKey,t=!0===e.oldFormat;return new Promise(((n,o)=>{let i={appCode:r.appCode,apiId:e.apiId,headers:{Authorization:uni.getStorageSync("userInfo").token,...e.header},requestData:e.data};t&&(i={body:e.data,apiHeader:[{headerKey:"Authorization",value:uni.getStorageSync("userInfo").token}],apiId:e.apiId},e.header&&"object"==typeof e.header&&Object.keys(e.header).forEach((a=>{i.apiHeader.push({headerKey:a,value:e.header[a]})}))),s({serveKey:a,url:"",responseType:e.responseType,data:i,method:"POST",gateway:!0}).then((e=>{n(e)})).catch((e=>{o(e)}))}))})(e)},request:{pack(e){const{task:a,serveKey:t,data:n,header:s,responseType:o}=e;return{serveKey:t||r.serveKey,url:a.apiUrl,method:a.method,data:n,header:s,responseType:o}},run:e=>s(e)},uploadFile:{pack(e){const{task:a,serveKey:t,filePath:n,name:s,formData:o,header:i}=e;return{serveKey:t||r.serveKey,url:a.apiUrl,filePath:n,name:s,formData:o,header:i}},run(e){return n=e,new Promise(((e,s)=>{uni.uploadFile({url:n.url,header:{Authorization:uni.getStorageSync("userInfo").token,...n.header},filePath:n.filePath,name:n.name||"file",formData:n.formData||{},success(o){const i=o.header["content-type"]||"";t(i)?e(o.data):"999"===o.data.errorCode?(s(o.data),a("提示","身份认证过期")):n.gateway?r.gatewaySuccessCode.includes(o.data.status)&&r.successCode.includes(o.data.data.status)?e(o.data.data):(s(o.data.data),a("提示",o.data.data.msg||o.data.msg)):r.successCode.includes(o.data.status)?e(o.data):(s(o.data),a("提示",o.data.msg))},fail(e){s(e),a("提示","网络错误，请重试")}})}));var n}}}[r.reqDrive],i=(d=["lwlims.mat.add"],[{apiId:"lwlims.mat.add",apiName:"物料添加接口",method:"post",apiUrl:"/mat/add"}].filter((e=>d.includes(e.apiId))));var d;const u={findMenu:e=>o.run(o.pack({task:n(i,"lwlims.mat.add"),data:e})),findMenu2:e=>o.run(o.pack({task:n(i,"lwlims.mat.add"),serveKey:"madpDev",data:e}))};__definePage("pages/index/index",{__name:"index",setup(a){const t=e.ref("Hello");return u.findMenu(),(a,n)=>(e.openBlock(),e.createElementBlock("view",{class:"content"},[e.createElementVNode("image",{class:"logo",src:"/static/logo.png"}),e.createElementVNode("view",{class:"text-area"},[e.createElementVNode("text",{class:"title"},e.toDisplayString(t.value),1)])]))}});uni.getSystemInfoSync().appId,uni.getStorageSync("userInfo").token,uni.getSystemInfoSync().platform,uni.getSystemInfoSync().platform;const c={onLaunch:function(){(()=>{let e=JSON.parse(plus.runtime.arguments);e&&uni.setStorageSync("userInfo",e.data)})(),function(){const e=r.injectKeys;if(e){let a=JSON.parse(plus.runtime.arguments);a&&a.data&&a.data.host?Array.isArray(e)?e.forEach((e=>{r.serve[e].host=a.data.host})):"string"==typeof e?r.serve[e].host=a.data.host:uni.showToast({title:"错误：注入点类型错误!",icon:"none",duration:2e3}):uni.showToast({title:"错误：代理地址注入失败!",icon:"none",duration:2e3})}else uni.showToast({title:"错误：未设置注入点!",icon:"none",duration:2e3})}(),uni.sendNativeEvent("scanInput"),uni.onNativeEventReceive(((e,a)=>{"scanInputResult"==e&&uni.$emit("scanInputResult",a),"nfcData"==e&&uni.$emit("nfcData",a)}))},onShow:function(){},onHide:function(){}};const{app:l,Vuex:p,Pinia:y}={app:e.createVueApp(c)};uni.Vuex=p,uni.Pinia=y,l.provide("__globalStyles",__uniConfig.styles),l._component.mpType="app",l._component.render=()=>{},l.mount("#app")}(Vue);

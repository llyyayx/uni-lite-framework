### proxy-api是什么？
在移动端项目开发时，需要将api url配置到移动中台上去，通过移动中台的网关代理访问，这是顶层设计需要遵守，但是在移动中台配置api url的过程往往比较繁琐，且需要多次反复点击操作，有些项目还可能分为测试/正式环境，这对于接口量巨大的应用来说是灾难性的。没错proxy-api就是为了解决这个麻烦问题的！

### 如何阅读
* HBuilder内点击右上角`预览`按钮即可从内置浏览器查看
* VsCode下载md文件阅读插件

### proxy-api功能有哪写？
* 文件式维护移动网关上的api配置(只需在js文件内添加配置对象即可自动化配置)
* 可便捷快速的进行增加、修改、删除操作
* 无需担心重复添加问题，内置防重复功能
* 操作状态日志化输出，轻松掌握执行情况，便于决策
* node环境运行，语言互通
* 无需任何依赖，占用空间极小
* 极大减少心智负担，快速配置，提高效率

### 目录文件
```
proxy-api
    --add.js  添加api的配置文件
	--add.mjs  全部请求任务，由app.js动态生成，不要手动维护
    --edit.js  修改api内容的配置文件
    --del.js   删除api的配置文件
    --config.js  程序运行的配置文件
    --utils.js  工具函数
    --index.js  主程序
```

### 前置条件
1. 请使用高版本node运行，理论上不低16.0.0，开发版本为21.0.0
2. 具备基本的浏览器调试(f12)知识，能够确认各个运行参数

### 如何使用
1. 请先确认config.js文件内的运行参数是否正确，文件内注释详细，按需修改即可(重点关注：`host`、`appCode`、`appSid`、`groupId`、`token`)
2. add.js添加需要在移动网关上添加的接口，文件内注释详细，按需添加
3. edit.js添加需要修改内容的接口，文件内注释详细，按需添加
4. del.js添加需要删除的接口，只需添加apiId即可，文件内注释详细，按需添加
5. 完成api在移动中台配置后，执行`npm run gateway:create`生成add.mjs用于前端引入

### 运行
根目录执行：
```
npm run gateway:add   //执行添加操作
npm run gateway:edit  //执行修改操作
npm run gateway:del   //执行删除操作
npm run gateway:create   //生成add.mjs
```

### 写在最后
1. 如果接口地址404，请修改主程序内`createUrl`、`getUrl`、`saveUrl`、`delUrl`变量地址
2. 建议前端页面里的request请求(封装)，直接引用proxy-api/add.mjs内的配置，这样便于统一管理
3. done: true意为api已完成添加，这个标志字段仅在添加文件内配置，删除文件执行后，匹配的api对应的done字段会置false
4. 移动中台分测试/正式环境的，手动修改config.js运行配置在次执行即可
5. 在编辑、删除的js文件中变更api配置后，add.js需要手动维护(对应修改或删除) - 手动维护出于灵活性考虑